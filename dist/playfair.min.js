/*! Playfair.js - v0.1.0-dev - 2013-09-28 */

(function(t){"use strict";var s=t.google||{},e=t.PF||{};t.PF=e,e.defaults=e.defaults||{},e.defaults.chs="300x200",e.opts=e.opts||{},e.opts.chd=function(t){var s,n,r=/^([tse]):(.+)$/;return(s=r.exec(t))?("t"===s[1]?n=function(t){var s,e,n,r,i,l,o,a,u,c;for(l=[],o=t.split("|"),s=0,e=o.length;e>s;s++){for(i=[],a=o[s],c=a.split(","),n=0,r=c.length;r>n;n++)u=c[n],"_"===u?u=null:(u=parseFloat(u),isNaN(u)&&(u=null)),i.push(u);l.push(i)}return l}(s[2]):"s"===s[1]?n=function(t){var s,e,n,r,i,l,o,a,u,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(l=[],o=t.split(","),s=0,e=o.length;e>s;s++){for(i=[],a=o[s],n=0,r=a.length;r>n;n++)u=a.substring(n,n+1),"_"===u?u=null:(u=c.indexOf(u),-1===u&&(u=null)),i.push(u);l.push(i)}return l}(s[2]):"e"===s[1]&&(n=function(t){var s,e,n,r,i,l,o,a,u,c,h,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-.";for(a=[],u=t.split(","),e=0,n=u.length;n>e;e++){for(o=[],c=u[e],r=0,i=c.length;i>r;r+=2)s=c.substring(r,r+1),l=c.substring(r+1,r+2),"_"===s||"_"===l?h=null:(s=p.indexOf(s),l=p.indexOf(l),h=-1===s||-1===l?null:64*s+l),o.push(h);a.push(o)}return a}(s[2])),n):(e.utils.logError("No format specified for chd (data). Aborting."),void 0)},e.opts.chdl=function(t){return(t||"").split("|")},e.opts.chl=e.opts.chdl,e.opts.chs=function(t){var s,n=/^(\d+)x(\d+)$/;return null==t&&(e.utils.logError("chs (size) not specified. Using default."),t=e.defaults.chs),s=n.exec(t),s||(e.utils.logError("chs (size) formatted incorrectly. Using default."),s=n.exec(e.defaults.chs)),{height:parseInt(s[2],10),width:parseInt(s[1],10)}},e.opts.cht=function(t){var n,r={};switch(t){case"p3":r.is3D=!0;case"p":n=s.visualization.PieChart;break;case"pc":e.utils.logError("Unsupported cht (chart type) specified. Aborting.");break;default:e.utils.logError("No cht (chart type) specified. Aborting.")}return{chartClass:n,options:r}},e.utils=e.utils||{},e.utils.buildTable=function(t,e){var n,r,i,l,o,a,u=[],c=0;for(a=new s.visualization.DataTable,a.addColumn("string"),n=0,r=e.length;r>n;n++)a.addColumn("number"),o=e[n],u.push(o.length);for(c=Math.max.apply(null,u),i=0;c>i;i++){for(l=[t[i]],n=0,r=e.length;r>n;n++)o=e[n],l.push(o[i]);a.addRow(l)}return a},e.utils.logError=function(s,e){e=e!==void 0?e:t.document.getElementById("playfair-errors");var n=t.document.createDocumentFragment(),r=t.document.createElement("p");r.textContent=s,n.appendChild(r),e.appendChild(n)},e.utils.parseHash=function(t){var s,e,n,r,i,l={};for(t="#"===t.substring(0,1)?t.substring(1):t,i=t.split("&"),s=0,e=i.length;e>s;s++)r=i[s],n=r.split("="),l[n[0]]=n[1];return l},e.init=function(n,r){var i=e.utils.parseHash(n);s.load("visualization","1.0",{packages:["corechart"]}),s.setOnLoadCallback(function(){var s,n,l=t.document.getElementById(r),o=e.opts.cht(i.cht),a=e.opts.chs(i.chs),u={},c=e.utils.buildTable(e.opts.chdl(i.chdl||i.chl),e.opts.chd(i.chd));for(n in o.options)o.options.hasOwnProperty(n)&&(u[n]=o.options[n]);u.height=a.height,u.width=a.width,s=new o.chartClass(l),s.draw(c,u)})}})(this);