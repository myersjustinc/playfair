/*! Playfair.js - v0.1.0-dev - 2013-10-16 */

(function(t){"use strict";var s=t.google||{},i=t.PF||{};t.PF=i,i.defaults=i.defaults||{},i.defaults.chs="300x200",i.opts=i.opts||{},i.opts.chd=function(t){var s,n,r=/^([tse]):(.+)$/;return(s=r.exec(t))?("t"===s[1]?n=function(t){var s,i,n,r,e,l,o,a,u,h;for(l=[],o=t.split("|"),s=0,i=o.length;i>s;s++){for(e=[],a=o[s],h=a.split(","),n=0,r=h.length;r>n;n++)u=h[n],"_"===u?u=null:(u=parseFloat(u),isNaN(u)&&(u=null)),e.push(u);l.push(e)}return l}(s[2]):"s"===s[1]?n=function(t){var s,i,n,r,e,l,o,a,u,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(l=[],o=t.split(","),s=0,i=o.length;i>s;s++){for(e=[],a=o[s],n=0,r=a.length;r>n;n++)u=a.substring(n,n+1),"_"===u?u=null:(u=h.indexOf(u),-1===u&&(u=null)),e.push(u);l.push(e)}return l}(s[2]):"e"===s[1]&&(n=function(t){var s,i,n,r,e,l,o,a,u,h,c,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-.";for(a=[],u=t.split(","),i=0,n=u.length;n>i;i++){for(o=[],h=u[i],r=0,e=h.length;e>r;r+=2)s=h.substring(r,r+1),l=h.substring(r+1,r+2),"_"===s||"_"===l?c=null:(s=p.indexOf(s),l=p.indexOf(l),c=-1===s||-1===l?null:64*s+l),o.push(c);a.push(o)}return a}(s[2])),n):(i.utils.logError("No format specified for chd (data). Aborting."),void 0)},i.opts.chdl=function(t){return(t||"").split("|")},i.opts.chl=i.opts.chdl,i.opts.chs=function(t){var s,n=/^(\d+)x(\d+)$/;return null==t&&(i.utils.logError("chs (size) not specified. Using default."),t=i.defaults.chs),s=n.exec(t),s||(i.utils.logError("chs (size) formatted incorrectly. Using default."),s=n.exec(i.defaults.chs)),{height:parseInt(s[2],10),width:parseInt(s[1],10)}},i.opts.cht=function(t){var n,r={};return"p3"===t?(n=s.visualization.PieChart,r.is3D=!0):"p"===t?n=s.visualization.PieChart:"bhs"===t?(n=s.visualization.BarChart,r.isStacked=!0):"bvs"===t?(n=s.visualization.ColumnChart,r.isStacked=!0):"bhg"===t?n=s.visualization.BarChart:"bvg"===t?n=s.visualization.ColumnChart:t?i.utils.logError("Unsupported cht (chart type) specified. Aborting."):i.utils.logError("No cht (chart type) specified. Aborting."),{chartClass:n,options:r}},i.utils=i.utils||{},i.utils.buildTable=function(t,i){var n,r,e,l,o,a,u=[],h=0;for(a=new s.visualization.DataTable,a.addColumn("string"),n=0,r=i.length;r>n;n++)a.addColumn("number"),o=i[n],u.push(o.length);for(h=Math.max.apply(null,u),e=0;h>e;e++){for(l=[t[e]],n=0,r=i.length;r>n;n++)o=i[n],l.push(o[e]);a.addRow(l)}return a},i.utils.logError=function(s,i){i=i!==void 0?i:t.document.getElementById("playfair-errors");var n=t.document.createDocumentFragment(),r=t.document.createElement("p");r.textContent=s,n.appendChild(r),i.appendChild(n)},i.utils.parseHash=function(t){var s,i,n,r,e,l={};for(t="#"===t.substring(0,1)?t.substring(1):t,e=t.split("&"),s=0,i=e.length;i>s;s++)r=e[s],n=r.split("="),l[n[0]]=n[1];return l},i.init=function(n,r){var e=i.utils.parseHash(n);s.load("visualization","1.0",{packages:["corechart"]}),s.setOnLoadCallback(function(){var s,n,l=t.document.getElementById(r),o=i.opts.cht(e.cht),a=i.opts.chs(e.chs),u={},h=i.utils.buildTable(i.opts.chdl(e.chdl||e.chl),i.opts.chd(e.chd));for(n in o.options)o.options.hasOwnProperty(n)&&(u[n]=o.options[n]);u.height=a.height,u.width=a.width,s=new o.chartClass(l),s.draw(h,u)})}})(this);