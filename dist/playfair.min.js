/*! Playfair.js - v0.1.0-dev - 2013-09-25 */

(function(t){"use strict";function e(){e.history=e.history||[],e.history.push(arguments),t.console&&t.console.log(Array.prototype.slice.call(arguments))}var r=t.google||{},s=t.PF||{};t.PF=s,s.defaults=s.defaults||{},s.defaults.chs="300x200",s.opts=s.opts||{},s.opts.chs=function(t){var e,r=/^(\d+)x(\d+)$/;return null==t&&(s.utils.logError("chs (size) not specified. Using default."),t=s.defaults.chs),e=r.exec(t),e||(s.utils.logError("chs (size) formatted incorrectly. Using default."),e=r.exec(s.defaults.chs)),{height:parseInt(e[2],10),width:parseInt(e[1],10)}},s.opts.chd=function(t){var e,r,n=/^([tse]):(.+)$/;if(e=n.exec(t),!e)return s.utils.logError("No format specified for chd (data). Aborting."),void 0;if("t"===e[1])r=function(t){var e,r,s,n,o,i,l,u,a,c;for(i=[],l=t.split("|"),e=0,r=l.length;r>e;e++){for(o=[],u=l[e],c=u.split(","),s=0,n=c.length;n>s;s++)a=c[s],"_"===a?a=null:(a=parseFloat(a),isNaN(a)&&(a=null)),o.push(a);i.push(o)}return i}(e[2]);else if("s"===e[1])r=function(t){var e,r,s,n,o,i,l,u,a,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(i=[],l=t.split(","),e=0,r=l.length;r>e;e++){for(o=[],u=l[e],s=0,n=u.length;n>s;s++)a=u.substring(s,s+1),"_"===a?a=null:(a=c.indexOf(a),-1===a&&(a=null)),o.push(a);i.push(o)}return i}(e[2]);else if("e"===e[1])return s.utils.logError("Extended encoding format not yet supported for chd (data). Aborting."),void 0;return r},s.utils=s.utils||{},s.utils.logError=function(e,r){r=r!==void 0?r:t.document.getElementById("playfair-errors");var s=t.document.createDocumentFragment(),n=t.document.createElement("p");n.textContent=e,s.appendChild(n),r.appendChild(s)},s.utils.parseHash=function(t){var e,r,s,n,o,i={};for(t="#"===t.substring(0,1)?t.substring(1):t,o=t.split("&"),e=0,r=o.length;r>e;e++)n=o[e],s=n.split("="),i[s[0]]=s[1];return i},s.init=function(n,o){var i=s.utils.parseHash(n);r.load("visualization","1.0",{packages:["corechart"]}),r.setOnLoadCallback(function(){t.document.getElementById(o),s.opts.chs(i.chs),e("Loaded.")})}})(this);