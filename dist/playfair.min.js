/*! Playfair.js - v0.1.0-dev - 2013-09-28 */

(function(t){"use strict";function n(){n.history=n.history||[],n.history.push(arguments),t.console&&t.console.log(Array.prototype.slice.call(arguments))}var e=t.google||{},s=t.PF||{};t.PF=s,s.defaults=s.defaults||{},s.defaults.chs="300x200",s.opts=s.opts||{},s.opts.chd=function(t){var n,e,r=/^([tse]):(.+)$/;return(n=r.exec(t))?("t"===n[1]?e=function(t){var n,e,s,r,l,o,u,i,a,c;for(o=[],u=t.split("|"),n=0,e=u.length;e>n;n++){for(l=[],i=u[n],c=i.split(","),s=0,r=c.length;r>s;s++)a=c[s],"_"===a?a=null:(a=parseFloat(a),isNaN(a)&&(a=null)),l.push(a);o.push(l)}return o}(n[2]):"s"===n[1]?e=function(t){var n,e,s,r,l,o,u,i,a,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(o=[],u=t.split(","),n=0,e=u.length;e>n;n++){for(l=[],i=u[n],s=0,r=i.length;r>s;s++)a=i.substring(s,s+1),"_"===a?a=null:(a=c.indexOf(a),-1===a&&(a=null)),l.push(a);o.push(l)}return o}(n[2]):"e"===n[1]&&(e=function(t){var n,e,s,r,l,o,u,i,a,c,h,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-.";for(i=[],a=t.split(","),e=0,s=a.length;s>e;e++){for(u=[],c=a[e],r=0,l=c.length;l>r;r+=2)n=c.substring(r,r+1),o=c.substring(r+1,r+2),"_"===n||"_"===o?h=null:(n=d.indexOf(n),o=d.indexOf(o),h=-1===n||-1===o?null:64*n+o),u.push(h);i.push(u)}return i}(n[2])),e):(s.utils.logError("No format specified for chd (data). Aborting."),void 0)},s.opts.chdl=function(t){return(t||"").split("|")},s.opts.chl=s.opts.chdl,s.opts.chs=function(t){var n,e=/^(\d+)x(\d+)$/;return null==t&&(s.utils.logError("chs (size) not specified. Using default."),t=s.defaults.chs),n=e.exec(t),n||(s.utils.logError("chs (size) formatted incorrectly. Using default."),n=e.exec(s.defaults.chs)),{height:parseInt(n[2],10),width:parseInt(n[1],10)}},s.utils=s.utils||{},s.utils.buildTable=function(t,n){var s,r,l,o,u,i,a=[],c=0;for(i=new e.visualization.DataTable,i.addColumn("string"),s=0,r=n.length;r>s;s++)i.addColumn("number"),u=n[s],a.push(u.length);for(c=Math.max.apply(null,a),l=0;c>l;l++){for(o=[t[l]],s=0,r=n.length;r>s;s++)u=n[s],o.push(u[l]);i.addRow(o)}return i},s.utils.logError=function(n,e){e=e!==void 0?e:t.document.getElementById("playfair-errors");var s=t.document.createDocumentFragment(),r=t.document.createElement("p");r.textContent=n,s.appendChild(r),e.appendChild(s)},s.utils.parseHash=function(t){var n,e,s,r,l,o={};for(t="#"===t.substring(0,1)?t.substring(1):t,l=t.split("&"),n=0,e=l.length;e>n;n++)r=l[n],s=r.split("="),o[s[0]]=s[1];return o},s.init=function(r,l){var o=s.utils.parseHash(r);e.load("visualization","1.0",{packages:["corechart"]}),e.setOnLoadCallback(function(){t.document.getElementById(l),s.opts.chs(o.chs),n("Loaded.")})}})(this);